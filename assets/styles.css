:root{--sidebar-width:320px;--accent:#5B7FFF;--accent-light:#7B9FFF;--accent-dark:#3D5FDD;--bg-light:#f5f7fc;--bg-lighter:#fafbfd;--border-color:#d8dce6;--text-primary:#1a1a2e;--text-secondary:#555;--success:#4ecca3;--shadow-sm:0 1px 3px rgba(91, 127, 255, 0.12);--shadow-md:0 4px 12px rgba(91, 127, 255, 0.15);--shadow-lg:0 12px 32px rgba(91, 127, 255, 0.2);--transition:all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)}
html,body,#map{height:100%}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Hiragino Kaku Gothic ProN','ヒラギノ角ゴ Pro',sans-serif;display:flex;background:#f0f2f8}
#sidebar{width:var(--sidebar-width);padding:0;box-sizing:border-box;background:linear-gradient(180deg, #ffffff 0%, var(--bg-lighter) 100%);overflow-y:auto;transition:margin-left var(--transition);box-shadow:4px 0 20px rgba(91, 127, 255, 0.18);position:relative;z-index:100}
#sidebar.collapsed{margin-left:calc(var(--sidebar-width) * -1)}
#sidebar::-webkit-scrollbar{width:6px}
#sidebar::-webkit-scrollbar-track{background:transparent}
#sidebar::-webkit-scrollbar-thumb{background:var(--accent-light);border-radius:3px;opacity:0.4}
#sidebar::-webkit-scrollbar-thumb:hover{opacity:0.7;background:var(--accent)}
.sidebar-header{display:flex;justify-content:space-between;align-items:center;padding:24px 18px;background:linear-gradient(135deg, #ffffff 0%, var(--bg-light) 100%);border-bottom:1px solid var(--border-color);box-shadow:0 2px 8px rgba(0,0,0,0.04);position:sticky;top:0;z-index:10}
.sidebar-header h1{margin:0;font-size:20px;font-weight:700;color:var(--text-primary);letter-spacing:-0.3px;background:linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.toggle-btn{width:40px;height:40px;padding:0;border-radius:10px;background:linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);color:#fff;border:none;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:var(--transition);flex-shrink:0;box-shadow:0 2px 8px rgba(91, 127, 255, 0.3)}
.toggle-btn:hover{background:linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);transform:scale(1.08);box-shadow:0 4px 12px rgba(91, 127, 255, 0.4)}
.toggle-btn:active{transform:scale(0.95)}
.expand-btn{position:fixed;left:8px;top:60px!important;width:48px;height:48px;padding:0;border-radius:12px;background:linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);color:#fff;border:none;cursor:pointer;font-size:22px;z-index:999;display:none;box-shadow:var(--shadow-lg);transition:var(--transition)}
.expand-btn:hover{background:linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);transform:scale(1.1);box-shadow:0 8px 20px rgba(91, 127, 255, 0.35)}
.expand-btn:active{transform:scale(0.95)}
body:has(#sidebar.collapsed) #expandSidebar{display:flex;align-items:center;justify-content:center}
details{margin:0;border-bottom:1px solid var(--border-color);background:#fff}
details summary{padding:16px 18px;cursor:pointer;font-weight:600;color:var(--text-primary);font-size:14px;user-select:none;transition:var(--transition);display:flex;align-items:center;justify-content:space-between}
details summary:hover{background:linear-gradient(90deg, rgba(91, 127, 255, 0.06) 0%, transparent 100%)}
details[open] summary{background:linear-gradient(90deg, rgba(91, 127, 255, 0.08) 0%, transparent 100%);color:var(--accent)}
details summary::after{content:'▼';font-size:10px;transition:transform 0.3s ease;display:inline-block;margin-left:auto;color:var(--accent)}
details[open] summary::after{transform:rotate(180deg)}
.filter-row{margin:10px 0;padding:0 18px;display:flex;flex-direction:column}
details:first-of-type .filter-row:first-of-type{padding-top:10px}
label{font-size:12px;margin-bottom:8px;font-weight:600;color:var(--text-primary);text-transform:uppercase;letter-spacing:0.4px;opacity:0.8}
select,input[type="range"]{font-size:13px;padding:10px 12px;border-radius:8px;border:1.5px solid var(--border-color);background:#fff;color:var(--text-primary);transition:var(--transition);font-weight:500}
input[type="range"]{padding:0;height:6px;-webkit-appearance:none;appearance:none;background:linear-gradient(90deg, var(--accent-light) 0%, var(--accent) 100%);outline:none;border:none}
input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);cursor:pointer;box-shadow:0 2px 8px rgba(91, 127, 255, 0.3);transition:var(--transition)}
input[type="range"]::-webkit-slider-thumb:hover{box-shadow:0 4px 12px rgba(91, 127, 255, 0.4);transform:scale(1.1)}
input[type="range"]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);cursor:pointer;border:none;box-shadow:0 2px 8px rgba(91, 127, 255, 0.3);transition:var(--transition)}
input[type="range"]::-moz-range-thumb:hover{box-shadow:0 4px 12px rgba(91, 127, 255, 0.4);transform:scale(1.1)}
input[type="range"]::-moz-range-track{background:transparent;border:none}
select:hover{border-color:var(--accent);background:#fafbfd}
select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(91, 127, 255, 0.15);background:#fff}
button{background:linear-gradient(135deg, var(--accent-light) 0%, var(--accent) 100%);color:#fff;border:none;cursor:pointer;border-radius:8px;font-size:13px;font-weight:600;padding:10px 14px;transition:var(--transition);box-shadow:0 2px 8px rgba(91, 127, 255, 0.25)}
button:hover{background:linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);transform:translateY(-2px);box-shadow:0 4px 12px rgba(91, 127, 255, 0.35)}
button:active{transform:translateY(0)}
#resetBtn{flex:1;margin:8px 0 4px 0;background:linear-gradient(135deg, #f0f2f8 0%, #e8ecf5 100%);color:var(--text-primary);border:1px solid var(--border-color);box-shadow:0 2px 6px rgba(0,0,0,0.04)}
#resetBtn:hover{background:linear-gradient(135deg, #e8ecf5 0%, #dce2f0 100%);box-shadow:0 4px 10px rgba(0,0,0,0.08)}
.filter-row:has(#resetBtn){display:flex;flex-direction:column;gap:0;padding-bottom:12px}
.checkbox-group{display:flex;flex-direction:column;gap:0;margin:8px 0;background:#fff;border-radius:10px;border:1px solid var(--border-color);overflow:hidden;max-height:240px;overflow-y:auto;box-shadow:inset 0 1px 3px rgba(0,0,0,0.02)}
.checkbox-group::-webkit-scrollbar{width:4px}
.checkbox-group::-webkit-scrollbar-track{background:transparent}
.checkbox-group::-webkit-scrollbar-thumb{background:var(--accent-light);border-radius:2px}
.checkbox-item{display:flex;align-items:center;padding:12px 14px;border-bottom:1px solid #f0f2f8;transition:var(--transition)}
.checkbox-item:last-child{border-bottom:none}
.checkbox-item:hover{background:linear-gradient(90deg, rgba(91, 127, 255, 0.06) 0%, transparent 100%)}
.checkbox-item input[type="checkbox"]{margin-right:10px;cursor:pointer;accent-color:var(--accent);width:16px;height:16px;border-radius:4px;transition:var(--transition)}
.checkbox-item input[type="checkbox"]:hover{transform:scale(1.1)}
.checkbox-item input[type="checkbox"]:checked{box-shadow:0 0 0 2px rgba(91, 127, 255, 0.3)}
.checkbox-item label{margin:0;font-size:13px;cursor:pointer;font-weight:400;color:var(--text-secondary);flex:1;transition:color 0.2s ease}
.checkbox-item:hover label{color:var(--text-primary)}
.gm-style-iw{font-size:13px!important;border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,0.15)!important}
.gm-style-iw img{max-width:200px;display:block;margin-top:8px;border-radius:6px}
#map{flex:1;background:#e8ecf5}
@media (max-width:900px){#sidebar{position:absolute;z-index:1000;background:linear-gradient(180deg, #ffffff 0%, var(--bg-lighter) 100%);left:8px;top:8px;width:90%;max-width:360px;height:auto;border-radius:12px;box-shadow:var(--shadow-lg)}}
